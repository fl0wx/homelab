---
icinga2_confd: local.d
icinga2_config_directories:
  - local.d
icinga2_constants:
  NodeName: "{{ ansible_fqdn }}"
  ZoneName: main
  TicketSalt: !vault |
            $ANSIBLE_VAULT;1.2;AES256;homelab
            64663133353136323338336638363566343737616364666361393230393633373936666436323462
            3334303438643464363532666664663863373039313962610a383361356236336339626439386631
            65666331663832343263313735376330306436656661393661323231373666363261663932333735
            3861633162336335330a353763623631323932633336626634616235646638663133623563313036
            63323465313030313334613835666362383537333836656634633165303366383330383461336332
            6662663362656232333934353763333132633464636638653966
icinga2_features:
  - name: api
    ca_host: "{{ 'none' if ansible_fqdn == 'staff-dbodky1.novalocal'
      else 'staff-dbodky1.novalocal' }}"
    force_newcert: true
    endpoints:
      - name: staff-dbodky1.novalocal
        host: 10.77.13.132
      - name: staff-dbodky2.novalocal
        host: 10.77.13.41
    zones:
      - name: main
        endpoints:
          - staff-dbodky1.novalocal
          - staff-dbodky2.novalocal
  - name: checker
  - name: icingadb
    host: "{{ ansible_fqdn }}"
    password: !vault |
              $ANSIBLE_VAULT;1.2;AES256;homelab
              39643333326332646165323063356238313332626330353532386264336136313462356433616239
              6366393535653138663337353236393837303032623062330a343434363833386635343134366539
              63373436353962396435656638306635613139393965663165373662636437613635623338646136
              6135626461656566310a326232616335326339646530326333346632633738353931356465333061
              39303762366661633661353235326232346265613434626434396564656531313339306535666434
              3030336261616565393438633565643630313230393336353162
  - name: mainlog
  - name: notification
icinga2_objects:
  staff-dbodky1.novalocal:
    - name: icingaweb
      type: ApiUser
      file: local.d/apiusers.conf
      password: !vault |
                $ANSIBLE_VAULT;1.2;AES256;homelab
                64346364363763363338336338343330303266323836343536666235313065383332323030366137
                3938623833393937643237396630656230313933353436300a346134653739653466353862623362
                62393235343461346366383530363839633739376639666263653062666534666262303564623339
                3436656437623135650a643431346138366164646437353163376133663965333934636136323737
                30383263656163373331616630663036373865393533643635643161333639663530386637383630
                3733353932613336343132396238653537303961373132333837
      permissions: ['*']
  staff-dbodky2.novalocal:
    - name: icingaweb
      type: ApiUser
      file: local.d/apiusers.conf
      password: !vault |
                $ANSIBLE_VAULT;1.2;AES256;homelab
                64346364363763363338336338343330303266323836343536666235313065383332323030366137
                3938623833393937643237396630656230313933353436300a346134653739653466353862623362
                62393235343461346366383530363839633739376639666263653062666534666262303564623339
                3436656437623135650a643431346138366164646437353163376133663965333934636136323737
                30383263656163373331616630663036373865393533643635643161333639663530386637383630
                3733353932613336343132396238653537303961373132333837
      permissions: ['*']
icinga2_purge_features: true
icingadb_database_import_schema: true
icingadb_database_name: icinga_db
icingadb_database_password: !vault |
          $ANSIBLE_VAULT;1.2;AES256;homelab
          64653737616432633631363636626663313264613734336164393566393765323938616235343865
          6332643562663432366435343964366230373231313235380a653866376338376266656133613037
          37383639386662336365653561326161383162663138303134346339643034343565323264656264
          6431626637366239630a653734303761303234333030643030313766656630326630343430363763
          39356265653135303333333762663334613466623035623961633066333733626265306533373837
          6339396662653239323466356166646230326539613331663538
icingadb_database_port: 3306
icingadb_database_type: mysql
icingadb_database_user: "{{ mysql_users[0]['name'] }}"
icingadb_redis_host: "{{ ansible_fqdn }}"
icingadb_redis_password: !vault |
          $ANSIBLE_VAULT;1.2;AES256;homelab
          39643333326332646165323063356238313332626330353532386264336136313462356433616239
          6366393535653138663337353236393837303032623062330a343434363833386635343134366539
          63373436353962396435656638306635613139393965663165373662636437613635623338646136
          6135626461656566310a326232616335326339646530326333346632633738353931356465333061
          39303762366661633661353235326232346265613434626434396564656531313339306535666434
          3030336261616565393438633565643630313230393336353162
icingadb_redis_port: 6380
icingaweb2_admin_password: !vault |
          $ANSIBLE_VAULT;1.2;AES256;homelab
          34656134303938373436643163396664383035353562323138396531346532386262316466643432
          6330313466353038613462623962333765613263356631360a313036613138313531356663343937
          35376137616132333930363766333965663062323766653763353333633864373030636564663661
          3965346135663130660a626465643437663236343465303761363337376464343031633661323939
          31393538326235383435363332666563316535616232663737653236316338323265633331326436
          3836333737656235633336323539333361623561336534303361
icingaweb2_admin_username: !vault |
          $ANSIBLE_VAULT;1.2;AES256;homelab
          33396533333036373631396132323430633261363332323535333264333838616234396266323535
          3566623634336662623231656434343134333663316538610a306539656663356564376361366163
          33613764383165303735613866323963366465626435666366383563366238313564383366313339
          6664626666306463310a626630373065653135633564643933376131636438393133313263626331
          3833
icingaweb2_db:
  type: mysql
  name: icinga_web
  host: "{{ 'localhost' if ansible_fqdn == 'staff-dbodky1.novalocal'
    else 'staff-dbodky1.novalocal' }}"
  user: icinga_web
  password: !vault |
            $ANSIBLE_VAULT;1.2;AES256;homelab
            64366565633938656239346565343366326566666161303839386665393430316639616461636638
            3932326562633630366639623332303430616465653866650a323964346436666338366337623862
            31633062373930353564643135613763343963366331303330303862656665313334393036356436
            3837363037366237340a323064353366323165623339613433666462363638633736653435353531
            36663165383339373131346138646362303134326632306138666535393862333963666461383735
            3662396137626565363163633733316134623866313861656664
icingaweb2_db_import_schema: true
icingaweb2_modules:
  director:
    enabled: true
    source: package
    import_schema: true
    run_kickstart: true
    kickstart:
      config:
        endpoint: staff-dbodky1.novalocal
        host: staff-dbodky1.novalocal
        username: icingaweb
        password: !vault |
                  $ANSIBLE_VAULT;1.2;AES256;homelab
                  64346364363763363338336338343330303266323836343536666235313065383332323030366137
                  3938623833393937643237396630656230313933353436300a346134653739653466353862623362
                  62393235343461346366383530363839633739376639666263653062666534666262303564623339
                  3436656437623135650a643431346138366164646437353163376133663965333934636136323737
                  30383263656163373331616630663036373865393533643635643161333639663530386637383630
                  3733353932613336343132396238653537303961373132333837
    config:
      db:
        resource: icinga_director
  icingadb:
    enabled: true
    source: package
    commandtransports:
      instance01:
        transport: api
        host: staff-dbodky1.novalocal
        username: icingaweb
        password: !vault |
                  $ANSIBLE_VAULT;1.2;AES256;homelab
                  64346364363763363338336338343330303266323836343536666235313065383332323030366137
                  3938623833393937643237396630656230313933353436300a346134653739653466353862623362
                  62393235343461346366383530363839633739376639666263653062666534666262303564623339
                  3436656437623135650a643431346138366164646437353163376133663965333934636136323737
                  30383263656163373331616630663036373865393533643635643161333639663530386637383630
                  3733353932613336343132396238653537303961373132333837
      instance02:
        transport: api
        host: staff-dbodky1.novalocal
        username: icingaweb
        password: !vault |
                  $ANSIBLE_VAULT;1.2;AES256;homelab
                  64346364363763363338336338343330303266323836343536666235313065383332323030366137
                  3938623833393937643237396630656230313933353436300a346134653739653466353862623362
                  62393235343461346366383530363839633739376639666263653062666534666262303564623339
                  3436656437623135650a643431346138366164646437353163376133663965333934636136323737
                  30383263656163373331616630663036373865393533643635643161333639663530386637383630
                  3733353932613336343132396238653537303961373132333837
    config:
      icingadb:
        resource: icinga_db
      redis:
        tls: '0'
    redis:
      redis1:
        host: staff-dbodky1.novalocal
        password: !vault |
                  $ANSIBLE_VAULT;1.2;AES256;homelab
                  39643333326332646165323063356238313332626330353532386264336136313462356433616239
                  6366393535653138663337353236393837303032623062330a343434363833386635343134366539
                  63373436353962396435656638306635613139393965663165373662636437613635623338646136
                  6135626461656566310a326232616335326339646530326333346632633738353931356465333061
                  39303762366661633661353235326232346265613434626434396564656531313339306535666434
                  3030336261616565393438633565643630313230393336353162
      redis2:
        host: staff-dbodky2.novalocal
        password: !vault |
                  $ANSIBLE_VAULT;1.2;AES256;homelab
                  39643333326332646165323063356238313332626330353532386264336136313462356433616239
                  6366393535653138663337353236393837303032623062330a343434363833386635343134366539
                  63373436353962396435656638306635613139393965663165373662636437613635623338646136
                  6135626461656566310a326232616335326339646530326333346632633738353931356465333061
                  39303762366661633661353235326232346265613434626434396564656531313339306535666434
                  3030336261616565393438633565643630313230393336353162
icingaweb2_resources:
  icinga_db:
    db: mysql
    dbname: icinga_db
    host: "{{ 'localhost' if ansible_fqdn == 'staff-dbodky1.novalocal'
      else 'staff-dbodky1.novalocal' }}"
    password: !vault |
              $ANSIBLE_VAULT;1.2;AES256;homelab
              64653737616432633631363636626663313264613734336164393566393765323938616235343865
              6332643562663432366435343964366230373231313235380a653866376338376266656133613037
              37383639386662336365653561326161383162663138303134346339643034343565323264656264
              6431626637366239630a653734303761303234333030643030313766656630326630343430363763
              39356265653135303333333762663334613466623035623961633066333733626265306533373837
              6339396662653239323466356166646230326539613331663538
    type: db
    username: icinga_db
  icinga_director:
    charset: utf8
    db: mysql
    dbname: icinga_director
    host: "{{ 'localhost' if ansible_fqdn == 'staff-dbodky1.novalocal'
      else 'staff-dbodky1.novalocal' }}"
    password: !vault |
              $ANSIBLE_VAULT;1.2;AES256;homelab
              31646630643638626538386137393063653065316634383961373734626662346566393538666131
              3339613632663433663935396635313962363437336133660a353930343864366635626331656265
              38626435353734333462616337643764663761623238623233303363353132623530336632633862
              3963376533613366630a376335333134626533663132643336613832653966646133383662306630
              36653938303435376433363138303739303636383432326563326638316361363861393262646636
              3436363866356332363236643237666431346231363164623666
    type: db
    username: icinga_director
